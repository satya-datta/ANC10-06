<?php include 'header.php'; ?>

<!-- Header Section ends -->
    <!-- Header Section end -->

        <!-- Main Section start -->
       <main>
            
                <div class="container-fluid ">
        <!-- Breadcrumb start -->
        <div class="row m-1">
            <div class="col-12 ">
                <h4 class="main-title">TEST DETAILS</h4>
                <ul class="app-line-breadcrumbs mb-3">
                    <li class="">
                        <a href="register-test.html" class="f-s-14 f-w-500">
                      <span>
                        <i class="ph-duotone  ph-stack f-s-16"></i>Test
                      </span>
                        </a>
                    </li>
                     <li class="">
                        <a href="test-management.html" class="f-s-14 f-w-500">
                            Test Management
                        </a>
                    </li>
                    <li class="active">
                        <a href="#" class="f-s-14 f-w-500">Test Details</a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Breadcrumb start -->
    </div>

    <!-- Invoice start -->
    <div class="container invoice-container">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
  <div class="table-responsive">
   <div id="printableArea">

  <div class="page">
    <table class="table">
      <tr>
        <td>
          <table class="table table-lg w-100 invoice-header">
            <tbody>
              <tr>
                <td>
                  <div class="mb-3">
                    <div class="mb-3">
                      <img src="assets/images/logo/1.png" class="w-200" alt="">
                    </div>
                  </div>
                </td>
                <td>
                  <div class="text-end">
                    <div class="mb-1">
                      <h3 class="text-primary">ANTENATAL</h3>
                    </div>
                    <p>RCHID -<strong> 123456789965</strong></p>
                    <p>Antenatal EDD -<strong> 2024-12-23</strong></p>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>

      <tr>
        <td>
          <table class="table w-100">
            <tbody>
              <tr>
                <td>
                  <h4>Beneficiary Details</h4>
                  <table style="width: 100%;">
                    <tr>
                      <td><strong>RCH ID</strong></td><td>:</td><td>123456789965</td>
                      <td><strong>Name</strong></td><td>:</td><td>Jane Doe</td>
                      <td><strong>Husband</strong></td><td>:</td><td>John Doe</td>
                    </tr>
                    <tr>
                      <td><strong>Age</strong></td><td>:</td><td>28</td>
                      <td><strong>GRAVIDA</strong></td><td>:</td><td>3</td>
                      <td><strong>PARA</strong></td><td>:</td><td>2</td>
                    </tr>
                    <tr>
                      <td><strong>Register Date</strong></td><td>:</td><td>2024-02-15</td>
                      <td><strong>LMP</strong></td><td>:</td><td>2024-03-18</td>
                      <td><strong>EDD</strong></td><td>:</td><td>2024-12-23</td>
                    </tr>
                    <tr>
                      <td><strong>Street</strong></td><td>:</td><td>123 Main Street</td>
                      <td><strong>City</strong></td><td>:</td><td>Mumbai</td>
                      <td><strong>Pincode</strong></td><td>:</td><td>400069</td>
                    </tr>
                  </table>
                </td>
              </tr>

              <tr>
                <td>
                  <h4 style="margin-top: 30px;">Vaccination & Supplement Info</h4>
                  <table style="width: 100%;">
                    <tr>
                      <td><strong>TD-1 Date</strong></td><td>:</td><td>dd-mm-yyyy</td>
                      <td><strong>TD-2 Date</strong></td><td>:</td><td>dd-mm-yyyy</td>
                      <td><strong>TD Booster</strong></td><td>:</td><td>dd-mm-yyyy</td>
                    </tr>
                    <tr>
                      <td><strong>IFA Date</strong></td><td>:</td><td>dd-mm-yyyy</td>
                      <td><strong>IFA Qty</strong></td><td>:</td><td>Enter IFA Quantity</td>
                      <td><strong>Calcium Date</strong></td><td>:</td><td>dd-mm-yyyy</td>
                    </tr>
                    <tr>
                      <td><strong>Calcium Qty</strong></td><td>:</td><td>Enter Calcium Quantity</td>
                      <td><strong>Albendazole Date</strong></td><td>:</td><td>dd-mm-yyyy</td>
                      <td><strong>Albendazole Qty</strong></td><td>:</td><td>Enter Albendazole Quantity</td>
                    </tr>
                  </table>
                </td>
              </tr>

            </tbody>
          </table>
        </td>
      </tr>
    </table>
  </div> <!-- end page 1 -->

  <div class="page">
    <table class="table w-100">
      <tbody>
        <tr>
          <td>
            <h4 style="margin-top: 30px;">Screenings & Test Results</h4>
            <table style="width: 100%;">
              <tr>
                <td><strong>TB Date</strong></td><td>:</td><td>dd-mm-yyyy</td>
                <td><strong>TB Result</strong></td><td>:</td><td>Refer</td>
                <td><strong>TB Refer</strong></td><td>:</td><td>Enter Referral</td>
              </tr>
              <tr>
                <td><strong>HIV Date</strong></td><td>:</td><td>dd-mm-yyyy</td>
                <td><strong>HIV Result</strong></td><td>:</td><td>Select Result</td>
                <td><strong>HBsAg Date</strong></td><td>:</td><td>dd-mm-yyyy</td>
              </tr>
              <tr>
                <td><strong>HBsAg Result</strong></td><td>:</td><td>Select Result</td>
              </tr>
            </table>
          </td>
        </tr>

        <tr>
          <td>
            <h4 style="margin-top: 30px;">HB Test Values</h4>
            <table style="width: 100%;">
              <tr>
                <td><strong>HB Test-1</strong></td><td>:</td><td>dd-mm-yyyy</td><td>Enter HB Test-1 Value</td>
                <td><strong>HB Test-2</strong></td><td>:</td><td>dd-mm-yyyy</td><td>Enter HB Test-2 Value</td>
              </tr>
              <tr>
                <td><strong>HB Test-3</strong></td><td>:</td><td>dd-mm-yyyy</td><td>Enter HB Test-3 Value</td>
                <td><strong>HB Test-4</strong></td><td>:</td><td>dd-mm-yyyy</td><td>Enter HB Test-4 Value</td>
              </tr>
            </table>
          </td>
        </tr>

        <tr>
          <td>
            <h4 style="margin-top: 30px;">Other Observations</h4>
            <table style="width: 100%;">
              <tr>
                <td><strong>BP Date</strong></td><td>:</td><td>dd-mm-yyyy</td>
                <td><strong>Systolic</strong></td><td>:</td><td>Enter SYS</td>
                <td><strong>Diastolic</strong></td><td>:</td><td>Enter DIA</td>
              </tr>
              <tr>
                <td><strong>Fetal Scan Date</strong></td><td>:</td><td>dd-mm-yyyy</td>
                <td><strong>Impression</strong></td><td>:</td><td>Good</td>
                <td><strong>Result</strong></td><td>:</td><td>Enter Result</td>
              </tr>
              <tr>
                <td><strong>OGTT Date</strong></td><td>:</td><td>dd-mm-yyyy</td>
                <td><strong>OGTT Value</strong></td><td>:</td><td>Enter Value</td>
              </tr>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
  </div> <!-- end page 2 -->

  <div class="page">
    <table class="table w-100">
      <tbody>
        <tr>
          <td>
            <h4 style="margin-top: 30px;">Test Records</h4>
            <table style="width: 100%;">
              <thead>
                <tr>
                  <th>No</th>
                  <th>Test Name</th>
                  <th>Date</th>
                  <th>Result</th>
                </tr>
              </thead>
              <tbody>
                <tr><td>1</td><td>Select Test</td><td>dd-mm-yyyy</td><td>Enter Result</td></tr>
                <tr><td>2</td><td>Select Test</td><td>dd-mm-yyyy</td><td>Enter Result</td></tr>
                <tr><td>3</td><td>Select Test</td><td>dd-mm-yyyy</td><td>Enter Result</td></tr>
                <tr><td>4</td><td>Select Test</td><td>dd-mm-yyyy</td><td>Enter Result</td></tr>
                <tr><td>5</td><td>Select Test</td><td>dd-mm-yyyy</td><td>Enter Result</td></tr>
              </tbody>
            </table>
          </td>
        </tr>

        <tr>
          <td>
            <h4 style="margin-top: 30px;">Abortion Info</h4>
            <table style="width: 100%;">
              <tr>
                <td><strong>ABORTION</strong></td><td>:</td><td>Yes</td>
                <td><strong>Status</strong></td><td>:</td><td>Enter Status</td>
              </tr>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
  </div> <!-- end page 3 -->

</div>

  </div>
</div>

                </div>

<script>               
function printDiv(divId) {
  const content = document.getElementById(divId).innerHTML;
  const originalContent = document.body.innerHTML;

  // Wrap content into .page divs if you can split logically
  // Or simply wrap everything in one page div if single page
  const wrappedContent = `<div id="printableArea">${content}</div>`;

  const printStyles = `
    <style>
      @media print {
        body * {
          visibility: hidden;
        }
        #printableArea, #printableArea * {
          visibility: visible;
        }
        #printableArea {
          position: absolute;
          left: 0;
          top: 0;
          width: 100%;
        }

        .page {
          page-break-after: always;
          border: 2px solid black;
          padding: 20px;
          margin: 0 auto 20px auto;
          box-sizing: border-box;
          height: 270mm; /* adjust as needed */
        }
        .page:last-child {
          page-break-after: auto;
        }
      }
    </style>
  `;

  document.body.innerHTML = printStyles + wrappedContent;

  // If you want to split content into pages manually, you can do so here before printing.

  window.print();
  document.body.innerHTML = originalContent;
}
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  async function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const element = document.getElementById("printableArea");

    const canvas = await html2canvas(element, {
      scale: 2,
      useCORS: true
    });

    const imgData = canvas.toDataURL("image/png");

    const pdf = new jsPDF('p', 'mm', 'a4');
    const pdfWidth = pdf.internal.pageSize.getWidth();
    const pdfHeight = pdf.internal.pageSize.getHeight();

    const imgWidth = pdfWidth - 20; // 10mm margin on left & right
    const imgHeight = (canvas.height * imgWidth) / canvas.width;

    let position = 10; // Top margin
    let heightLeft = imgHeight;

    // Draw border
    pdf.setLineWidth(0.5);
    pdf.rect(5, 5, pdfWidth - 10, pdfHeight - 10); // outer border (5mm margin)

    // Add first page image
    pdf.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
    heightLeft -= (pdfHeight - 20);

    // Handle multi-page content
    while (heightLeft > 0) {
      pdf.addPage();
      pdf.rect(5, 5, pdfWidth - 10, pdfHeight - 10); // border on new page
      position = 10 - (imgHeight - heightLeft);
      pdf.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
      heightLeft -= (pdfHeight - 20);
    }

    // Add date/time at the bottom of the last page
    const now = new Date();
    const dateTimeString = now.toLocaleString();
    pdf.setFontSize(10);
    pdf.text(`Downloaded on: ${dateTimeString}`, 10, pdfHeight - 10);

    // const filename = `${element.id}.pdf`;
      const filename = `exaple.pdf`  
    pdf.save(filename);
  }
</script>




                <div class="invoice-footer float-end mb-3">
                    <button type="button" class="btn btn-primary m-1" onclick="printDiv('printableArea')">
                        <i class="ti ti-printer"></i> Print</button>
                    <button type="button" class="btn btn-secondary m-1"><i class="ti ti-send"></i> Send </button>
                    <button type="button" class="btn btn-success m-1" onclick="downloadPDF()">
                        <i class="ti ti-download"></i> Download
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- Invoice end -->
        </main>
        <!-- Main Section end -->
    </div>

    <!-- tap on top -->
    <div class="go-top">
      <span class="progress-value">
        <i class="ti ti-arrow-up"></i>
      </span>
    </div>

    <!-- Footer Section start -->
     <!-- Footer Section starts-->
<?php include 'footer.php'; ?>